<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

<canvas id="qrcode" width="250" height="250" style="border:1px solid #ccc"></canvas>
<div id="qrStatus"></div>

<script>
window.addEventListener('load', () => {
  const canvas = document.getElementById('qrcode');
  const status = document.getElementById('qrStatus');

  if (!canvas) { status.textContent = "Missing canvas#qrcode in HTML."; return; }
  if (!window.QRCode) { status.textContent = "QRCode library did not load."; return; }

  QRCode.toCanvas(canvas, window.location.href, { width: 250 }, (err) => {
    status.textContent = err ? ("QR error: " + err.message) : "";
  });
});
</script>
